# xAG Prediction Competition - Kaggle Grandmaster Template

Kaggleã‚°ãƒ©ãƒ³ãƒ‰ãƒã‚¹ã‚¿ãƒ¼æµã®å®Ÿé¨“ç®¡ç†æ§‹æˆã‚’ä½¿ç”¨ã—ãŸxAGï¼ˆã‚¢ã‚·ã‚¹ãƒˆæœŸå¾…å€¤ï¼‰äºˆæ¸¬ã‚³ãƒ³ãƒšãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã§ã™ã€‚

## ğŸ¯ ç«¶æŠ€æ¦‚è¦

- **ç«¶æŠ€å**: ã‚¢ã‚·ã‚¹ãƒˆæœŸå¾…å€¤ï¼ˆxAGï¼‰äºˆæ¸¬ã‚³ãƒ³ãƒšãƒ†ã‚£ã‚·ãƒ§ãƒ³
- **è©•ä¾¡æŒ‡æ¨™**: é‡ã¿ä»˜ãRMSE (Position-Weighted RMSE)
- **æå‡ºãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ**: row_id, xAG
- **ãƒ‡ãƒ¼ã‚¿æœŸé–“**: 2017-18ã‚·ãƒ¼ã‚ºãƒ³ æ¬§å·ä¸»è¦ãƒªãƒ¼ã‚°
- **ãƒ‡ãƒ¼ã‚¿**: ãƒ—ãƒ¬ãƒ¼å˜ä½ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãƒ‡ãƒ¼ã‚¿ â†’ è©¦åˆå˜ä½ã®xAGäºˆæ¸¬

## ğŸ—ï¸ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹æˆ

```
xag-prediction/
â”œâ”€â”€ experiments/           # å®Ÿé¨“ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªï¼ˆ1å®Ÿé¨“=1ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªï¼‰
â”‚   â””â”€â”€ exp0001/          # ãƒ™ãƒ¼ã‚¹ãƒ©ã‚¤ãƒ³å®Ÿé¨“
â”‚       â”œâ”€â”€ training.ipynb      # å­¦ç¿’ãƒãƒ¼ãƒˆãƒ–ãƒƒã‚¯
â”‚       â”œâ”€â”€ evaluation.ipynb    # OOFåˆ†æãƒ»CVå“è³ªãƒã‚§ãƒƒã‚¯
â”‚       â”œâ”€â”€ inference.ipynb     # æ¨è«–ãƒ»æå‡º
â”‚       â”œâ”€â”€ config.yaml         # å®Ÿé¨“è¨­å®šã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆ
â”‚       â”œâ”€â”€ cv_folds.parquet    # CVåˆ†å‰²å›ºå®š
â”‚       â”œâ”€â”€ oof.parquet         # OOFäºˆæ¸¬
â”‚       â”œâ”€â”€ metrics.json        # CV/OOFæŒ‡æ¨™
â”‚       â”œâ”€â”€ model/              # foldåˆ¥ãƒ¢ãƒ‡ãƒ«
â”‚       â”œâ”€â”€ logs/               # å®Ÿè¡Œãƒ­ã‚°ãƒ»CVãƒ¡ãƒˆãƒªã‚¯ã‚¹
â”‚       â”œâ”€â”€ submissions/        # æå‡ºãƒ•ã‚¡ã‚¤ãƒ«
â”‚       â”œâ”€â”€ env/requirements.lock # å›ºå®šç’°å¢ƒ
â”‚       â””â”€â”€ notes.md            # å®Ÿé¨“ãƒãƒ¼ãƒˆ
â”œâ”€â”€ data/                 # ã‚³ãƒ³ãƒšãƒ‡ãƒ¼ã‚¿
â”‚   â”œâ”€â”€ action_data.csv           # ãƒ—ãƒ¬ãƒ¼å˜ä½ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãƒ‡ãƒ¼ã‚¿ (591MB)
â”‚   â”œâ”€â”€ match_train_data.csv      # è©¦åˆå˜ä½è¨“ç·´ãƒ‡ãƒ¼ã‚¿ (4.4MB)
â”‚   â”œâ”€â”€ match_test_data.csv       # è©¦åˆå˜ä½ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ (2.0MB)
â”‚   â””â”€â”€ sample_submission.csv     # æå‡ºãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ (114KB)
â”œâ”€â”€ configs/             # åŸºåº•è¨­å®š
â”‚   â”œâ”€â”€ data.yaml       # ãƒ‡ãƒ¼ã‚¿ãƒ»å‰å‡¦ç†è¨­å®š
â”‚   â”œâ”€â”€ cv.yaml         # CVæˆ¦ç•¥è¨­å®š
â”‚   â”œâ”€â”€ lgbm.yaml       # LightGBMè¨­å®š
â”‚   â””â”€â”€ features.yaml   # ç‰¹å¾´é‡è¨­å®š
â”œâ”€â”€ scripts/             # ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
â”œâ”€â”€ experiments.csv      # å®Ÿé¨“å°å¸³ï¼ˆè‡ªå‹•è¿½è¨˜ï¼‰
â”œâ”€â”€ dvc.yaml            # DVCãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³
â””â”€â”€ README.md           # ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«
```

## ğŸ§ª @experiments å®Ÿé¨“ã‚µãƒãƒªãƒ¼

| å®Ÿé¨“ID / ãƒ–ãƒ©ãƒ³ãƒ                      | å…ƒãƒ•ã‚¡ã‚¤ãƒ«                            | å®Ÿæ–½æ—¥        | è©¦ã—ãŸã“ã¨                                    | ç²¾åº¦ã¸ã®å½±éŸ¿ (CV / LB etc.)                                                            | çµæœ                                                                      | è€ƒå¯Ÿ                                                                                                                                                        | æ ¹æ‹ ãƒ»ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆ                                                                                                  |
| :------------------------------- | :------------------------------- | :--------- | :--------------------------------------- | :------------------------------------------------------------------------------- | :---------------------------------------------------------------------- | :-------------------------------------------------------------------------------------------------------------------------------------------------------- | :------------------------------------------------------------------------------------------------------------ |
| exp0001_baseline                 | -                                | 2025-10-02 | LightGBMãƒ™ãƒ¼ã‚¹ãƒ©ã‚¤ãƒ³æ§‹ç¯‰                         | CV: 0.246 â†’ 0.231 (âˆ’6.1%)                                                        | âœ… æ”¹å–„                                                                    | Optunaèª¿æ•´ã«ã‚ˆã‚Šéå­¦ç¿’ãŒæŠ‘åˆ¶ã•ã‚Œæ±åŒ–æ€§èƒ½ãŒå‘ä¸Š                                                                                                                                | `/Users/aritakohei/Library/CloudStorage/Dropbox/ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆ 2025-10-02 16.08.39.png`                   |
| exp0001_host_baseline_002        | exp0001_baseline                 | 2025-10-02 | Optunaèª¿æ•´ (num_leaves=17, lrâ‰ˆ0.0196)      | CV mean: 0.2687 (OOF: 0.2688)                                                    | -                                                                       | æ¯”è¼ƒåŸºæº–ã¨ãªã‚‹ãƒ™ãƒ¼ã‚¹ãƒ©ã‚¤ãƒ³ã€‚åŸºæœ¬ç‰¹å¾´é‡ã®ã¿ã§ã®æ€§èƒ½                                                                                                                                 | `experiments/exp0001/logs/host_baseline_002_metrics.json`                                                     |
| exp0002_host_baseline_002        | exp0001_host_baseline_002        | 2025-10-02 | ã‚¢ã‚¯ã‚·ãƒ§ãƒ³æ´¾ç”Ÿç‰¹å¾´é‡è¿½åŠ  + æ™‚é–“æ­£è¦åŒ– + ã‚¿ãƒ¼ã‚²ãƒƒãƒˆã‚¨ãƒ³ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°     | CV mean: 0.2683 (std 0.0061) / OOF: 0.2684                                       | âœ… æ”¹å–„                                                                    | é¸æ‰‹ã®è¡Œå‹•ãƒ‘ã‚¿ãƒ¼ãƒ³ã¨æ™‚é–“è¦ç´ ã®æ­£è¦åŒ–ãŒäºˆæ¸¬ç²¾åº¦ã«å¯„ä¸ã€‚ã‚ãšã‹ãªæ”¹å–„(âˆ’0.0004)                                                                                                                | `experiments/exp0002/logs/host_baseline_002_metrics.json`, `experiments/exp0002/training.ipynb`               |
| exp0003_host_baseline_002        | exp0002_host_baseline_002        | 2025-10-02 | ãƒ—ãƒ­ã‚°ãƒ¬ãƒƒã‚·ãƒ–/ãƒ‡ã‚£ãƒ¼ãƒ—æŒ‡æ¨™ã®é›†ç´„ç‰¹å¾´ + passâ†’shotæ‹¡å¼µ        | CV mean: 0.2662 (std 0.0060) / OOF: 0.2663                                       | âœ… æ”¹å–„                                                                    | æ”»æ’ƒçš„ãƒ—ãƒ¬ãƒ¼é€£é–ã®ç‰¹å¾´é‡åŒ–ãŒåŠ¹æœçš„ã€‚ç´¯ç©ã§âˆ’0.0025ã®æ”¹å–„                                                                                                                           | `experiments/exp0003/logs/host_baseline_002_metrics.json`, `experiments/exp0003/training.ipynb`               |
| exp0004_two_stage_hurdle         | exp0003_host_baseline_002        | 2025-10-02 | xAG>0åˆ†é¡â†’å›å¸°ã®2æ®µéšLightGBM + æ—¢å­˜ç‰¹å¾´ç¾¤           | CV mean: 0.2889 (std 0.0059) / OOF: 0.2890                                       | âŒ æ‚ªåŒ–                                                                    | åˆ†é¡ç¢ºç‡ã®ç¸®å°åŠ¹æœã§é«˜xAGè©¦åˆã‚’éå°è©•ä¾¡ã€‚ã‚­ãƒ£ãƒªãƒ–ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ä¸è¶³ã«ã‚ˆã‚Š+0.0227æ‚ªåŒ–                                                                                                             | `experiments/exp0004/logs/host_baseline_002_metrics.json`, `experiments/exp0004/training.ipynb`               |
| exp0005_squad_opponent_te        | exp0003_host_baseline_002        | 2025-10-03 | SquadÃ—Opponentäº¤äº’ä½œç”¨ã®OOFã‚¿ãƒ¼ã‚²ãƒƒãƒˆã‚¨ãƒ³ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¿½åŠ     | CV mean: 0.2659 (std 0.0061) / OOF: 0.2660                                       | âœ… æ”¹å–„                                                                    | å¯¾æˆ¦ã‚«ãƒ¼ãƒ‰åˆ¥ã®xAGå‚¾å‘ã‚’æ•æ‰ã€‚exp0003ã‹ã‚‰âˆ’0.0003ã®æ”¹å–„ã§ãƒ™ã‚¹ãƒˆã‚¹ã‚³ã‚¢æ›´æ–°                                                                                                              | `experiments/exp0005/logs/host_baseline_002_metrics.json`, `experiments/exp0005/training.ipynb`               |
| exp0006_monotone_constraints     | exp0005_squad_opponent_te        | 2025-10-03 | LightGBMå˜èª¿æ€§åˆ¶ç´„ï¼ˆmonotone_constraintsï¼‰ã®å°å…¥   | CV mean: 0.2657 (std 0.0061) / OOF: 0.2658                                       | âœ… æ”¹å–„                                                                    | 14ç‰¹å¾´é‡ã«å˜èª¿å¢—åŠ åˆ¶ç´„ã‚’é©ç”¨ã€‚exp0005ã‹ã‚‰âˆ’0.0002æ”¹å–„ã§**æ–°ãƒ™ã‚¹ãƒˆã‚¹ã‚³ã‚¢æ›´æ–°** (0.2657)ã€‚éå­¦ç¿’æŠ‘åˆ¶ã¨ãƒ‰ãƒ¡ã‚¤ãƒ³çŸ¥è­˜ã®çµ„ã¿è¾¼ã¿ãŒåŠ¹æœçš„                                                                           | `experiments/exp0006/logs/host_baseline_002_metrics.json`, `experiments/exp0006/training.ipynb`               |
| exp0007_xt_features              | exp0006_monotone_constraints     | 2025-10-03 | xT (Expected Threat) ç‰¹å¾´é‡ã®è¿½åŠ               | CV mean: 0.2653 (std 0.0063) / OOF: 0.2654                                       | âœ… æ”¹å–„                                                                    | Î”xTç‰¹å¾´ãŒæ”»æ’ƒãƒ»ä½ç½®æŒ‡æ¨™ã‚’è£œå®Œã—ã€exp0006ã‹ã‚‰âˆ’0.0004ã§æ–°ãƒ™ã‚¹ãƒˆæ›´æ–°ã€‚fold2ã§é«˜ãƒªãƒ•ãƒˆã‚’ç¢ºèª                                                                                                   | `experiments/exp0007/logs/host_baseline_002_metrics.json`, `experiments/exp0007/training.ipynb`               |
| exp0008_monotone_constraints_fix | exp0007_xt_features              | 2025-10-03 | å˜èª¿æ€§åˆ¶ç´„å¯¾è±¡åˆ—ã®æ•´åˆæ€§ã¨å­˜åœ¨ãƒã‚§ãƒƒã‚¯                      | CV mean: 0.2649 (std 0.0063) / OOF: 0.2650                                       | âœ… æ”¹å–„                                                                    | æ—¢å­˜åˆ¶ç´„ã®åˆ—åã‚ºãƒ¬ã‚’ä¿®æ­£ã—ã€æ”»æ’ƒç³»ç‰¹å¾´é‡ã¸ã®å˜èª¿å¢—åŠ åˆ¶ç´„ã‚’é©æ­£åŒ–ã€‚exp0007ã‹ã‚‰âˆ’0.0004æ›´æ–°ã§ãƒ™ã‚¹ãƒˆç¶™ç¶š                                                                                                 | `experiments/exp0008/logs/host_baseline_002_metrics.json`, `experiments/exp0008/training.ipynb`               |
| exp0009_tweedie_quantile         | exp0008_monotone_constraints_fix | 2025-10-03 | Tweedieç›®çš„ + åˆ†ä½LGBMãƒ–ãƒ¬ãƒ³ãƒ‰ (Isotonicæ ¡æ­£å«ã‚€)    | CV mean: 0.2657 (std 0.0070) / OOF: 0.2657 â†’ åˆ†ä½ãƒ–ãƒ¬ãƒ³ãƒ‰ OOF 0.2657 â†’ æ ¡æ­£å¾Œ 0.2735      | âŒ æ‚ªåŒ–                                                                    | Tweedieã¯å³è£¾é‡è¦–ã§ã‚‚åŸºç¤ãƒ¢ãƒ‡ãƒ«æ¯” +0.0007ã€‚åˆ†ä½ãƒ–ãƒ¬ãƒ³ãƒ‰ã¯0.1è¿‘å‚ã®ãƒã‚¤ã‚¢ã‚¹è£œæ­£ç‹™ã„ã‚‚æ ¡æ­£ã§é€†ã«æ‚ªåŒ–ã€‚Tailå¼·èª¿ã¯åˆ¥ã®æå¤±è¨­è¨ˆãŒå¿…è¦                                                                               | `experiments/exp0009/logs/host_baseline_002_metrics.json`, `experiments/exp0009/training.ipynb`               |
| exp0010_learned_xt               | exp0009_tweedie_quantile         | 2025-10-03 | å­¦ç¿’å‹xT (value iteration) + Î”xTæ´¾ç”Ÿé›†ç´„        | CV mean: 0.2560 (std 0.0060) / OOF: 0.2561                                       | âœ… å¤§å¹…æ”¹å–„                                                                  | å›ºå®šãƒãƒˆãƒªã‚¯ã‚¹xTã‚’Markovå­¦ç¿’å€¤ã¸ç½®ãæ›ãˆã€æˆåŠŸæœŸå¾…å€¤Ã—Î”xTç­‰ã‚’é¸æ‰‹Ã—è©¦åˆã«é›†ç´„ã€‚fold1ã§-0.020ã€å¹³å‡ã§ã‚‚-0.009æ”¹å–„ã—éå»æœ€è‰¯ã‚’æ›´æ–°                                                                            | `experiments/exp0010/logs/host_baseline_002_metrics.json`, `experiments/exp0010/training.ipynb`               |
| exp0011_possession_progression   | exp0010_learned_xt               | 2025-10-03 | å­¦ç¿’xT + ãƒã‚¼ãƒƒã‚·ãƒ§ãƒ³é€²è¡Œé€Ÿåº¦/ç›´é€²æ€§é›†ç´„                  | CV mean: 0.2530 (std 0.0064) / OOF: 0.2530                                       | âœ… æ”¹å–„                                                                    | å­¦ç¿’xTã«é€£å‹•ã—ã¦ãƒã‚¼ãƒƒã‚·ãƒ§ãƒ³é€Ÿåº¦ãƒ»Î”x/ç§’ãƒ»ãƒ•ã‚¡ã‚¤ãƒŠãƒ«ã‚µãƒ¼ãƒ‰åˆ°é”ã‚¹ãƒ†ãƒƒãƒ—ç­‰ã‚’è¿½åŠ ã€‚fold1ã§-0.0027ã€å¹³å‡ã§-0.003æ”¹å–„ã¨éå»æœ€è‰¯ã‚’æ›´æ–°                                                                               | `experiments/exp0011/logs/host_baseline_002_metrics.json`, `experiments/exp0011/training.ipynb`               |
| exp0012_pass_network             | exp0011_possession_progression   | 2025-10-03 | å­¦ç¿’xT + ãƒã‚¼ãƒƒã‚·ãƒ§ãƒ³é€²è¡Œ + ãƒ‘ã‚¹ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ä¸­å¿ƒæ€§            | CV mean: 0.2533 (std 0.0064) / OOF: 0.2534                                       | â– å¾®å·®                                                                    | ä¸­å¿ƒæ€§ãƒ»å—ã‘å£ã‚’è¿½åŠ ã—foldå¹³å‡ã¯æ¨ªã°ã„ã€‚`xt`/ãƒã‚¼ãƒƒã‚·ãƒ§ãƒ³æŒ‡æ¨™ãŒä¾ç„¶æ”¯é…çš„ã§ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ç‰¹å¾´ã¯ä¼¸ã³å¹…ãŒå°ã•ã„                                                                                                | `experiments/exp0012/logs/host_baseline_002_metrics.json`, `experiments/exp0012/training.ipynb`               |
| exp0013_interaction_constraints  | exp0012_pass_network             | 2025-10-03 | LightGBM interaction_constraints é©ç”¨      | CV mean: 0.3061 (std 0.0097) / OOF: 0.3063                                       | âŒ å¤§å¹…æ‚ªåŒ–                                                                  | è¨±å¯ã‚°ãƒ«ãƒ¼ãƒ—ãŒç‹­ãæœ¨ã®åˆ†å‰²ãŒåˆ¶é™ã•ã‚Œã€å­¦ç¿’xT/ãƒã‚¼ãƒƒã‚·ãƒ§ãƒ³ç‰¹å¾´ã‚’æ´»ã‹ã›ãšå¤§å¹…åŠ£åŒ–ã€‚åˆ¶ç´„è¨­è¨ˆã®å†æ¤œè¨ãŒå¿…è¦                                                                                                     | `experiments/exp0013/logs/host_baseline_002_metrics.json`, `experiments/exp0013/training.ipynb`               |
| exp0014_edxt_lambda              | exp0013_interaction_constraints  | 2025-10-03 | eÎ”xT Î»æœ€é©åŒ– + xPassæˆåŠŸç‡å°å…¥ + foldæ•´å‚™          | CV mean: 0.2459 (std 0.0067) / OOF: 0.2460                                       | âœ… å¤§å¹…æ”¹å–„                                                                  | eÎ”xTèª¿æ•´ã§æ”»æ’ƒãƒªã‚¹ã‚¯è©•ä¾¡ã‚’æ”¹å–„ã—ã€éå»ã®åŠ£åŒ–ã‚’å·»ãè¿”ã—ã¤ã¤ãƒ™ã‚¹ãƒˆæ›´æ–°ã€‚foldåˆ—ç”Ÿæˆé †ã®ä¿®æ­£ã§å†ç¾æ€§å‘ä¸Šã€‚                                                                                                   | `experiments/exp0014/logs/host_baseline_002_metrics.json`, `experiments/exp0014/training.ipynb`               |
| exp0015_edxt_scaled              | exp0014_edxt_lambda              | 2025-10-03 | eÎ”xTå¤±æ•—ã‚³ã‚¹ãƒˆã®æ¨™æº–åŒ– + Î»æ¢ç´¢æ‹¡å¼µ + ã‚»ãƒƒãƒˆãƒ—ãƒ¬ãƒ¼æ¯”ç‡ç‰¹å¾´       | CV mean: 0.2459 (std 0.0068) / OOF: 0.2460                                       | â– å¾®å·®                                                                    | å¤±æ•—ã‚³ã‚¹ãƒˆã‚’æ¨™æº–åŒ–ã—ãŸä¸Šã§ã‚»ãƒƒãƒˆãƒ—ãƒ¬ãƒ¼/ã‚ªãƒ¼ãƒ—ãƒ³ãƒ—ãƒ¬ãƒ¼é›†ç´„ã‚’è¿½åŠ ã€‚ã‚¹ã‚³ã‚¢ã¯æ¨ªã°ã„ã ãŒÎ»åˆ†å¸ƒãŒåºƒãŒã‚Šåˆ†æä½™åœ°ã‚’ç¢ºä¿ã€‚                                                                                                 | `experiments/exp0015/logs/host_baseline_002_metrics.json`, `experiments/exp0015/training.ipynb`               |
| exp0016_edxt_group_norm          | exp0015_edxt_scaled              | 2025-10-03 | eÎ”xTå¤±æ•—ã‚³ã‚¹ãƒˆã®è¡Œç‚ºã‚¿ã‚¤ãƒ—åˆ¥æ¨™æº–åŒ– + Î»çµ±è¨ˆå‡ºåŠ›              | CV mean: 0.2461 (std 0.0068) / OOF: 0.2462                                       | â– å¾®å·®                                                                    | è¡Œç‚ºã‚¿ã‚¤ãƒ—ã”ã¨ã«å¤±æ•—æˆåˆ†ã‚’æ¨™æº–åŒ–ã—Î»æ¢ç´¢ã‚’æ‹¡å¼µã€‚ã‚¹ã‚³ã‚¢ã¯æ¨ªã°ã„ã ãŒè² ã®Î»ãŒåˆ†æ•£ã—ã€ãƒ‘ã‚¹ç³»ã‚³ã‚¹ãƒˆãŒé¡•åœ¨åŒ–ã€‚                                                                                                      | `experiments/exp0016/logs/host_baseline_002_metrics.json`, `experiments/exp0016/training.ipynb`               |
| exp0017_team_context_gate        | exp0016_edxt_group_norm          | 2025-10-03 | eÎ”xTæˆåŠŸç¢ºç‡+ãƒãƒ¼ãƒ æ–‡è„ˆæ¯”ç‡+ãƒªãƒ¼ã‚°ã‚²ãƒ¼ãƒˆäº¤äº’ä½œç”¨              | CV mean: 0.2462 (std 0.0066) / OOF: 0.2463                                       | â– å¾®å·®                                                                    | ãƒãƒ¼ãƒ åˆè¨ˆ/LOPOæ¯”ç‡ã¨CompetitionÃ—xTã‚¯ãƒ­ã‚¹ã§è§£é‡ˆæ€§å‘ä¸Šã€‚fold2æ‚ªåŒ–ã§å¹³å‡ã¯ã‚ãšã‹ã«å¢—ã ãŒä»–foldã¯å®‰å®šã€é‡è¦åº¦ã«ãƒãƒ¼ãƒ æ¯”ç‡ç³»ãŒæµ®ä¸Šã€‚                                                                            | `experiments/exp0017/logs/host_baseline_002_metrics.json`, `experiments/exp0017/training.ipynb`               |
| exp0018_league_gate_residual     | exp0017_team_context_gate        | 2025-10-03 | ãƒªãƒ¼ã‚°ã‚²ãƒ¼ãƒˆæ®‹å·®è£œæ­£ + eÎ”xTå†å­¦ç¿’ + LOPOå·®åˆ†å¼·åŒ–          | CV mean: 0.2464 (std 0.0068) / OOF: 0.2465                                       | â– å¾®å·®                                                                    | fold2æ‚ªåŒ–ãŒç¶™ç¶šã—å¹³å‡ã¯+0.0002ã€‚ãƒªãƒ¼ã‚°åˆ¥æ®‹å·®ã‚’è£œæ­£ã—ã¤ã¤LOPOæ¯”ç‡ã‚’æ‹¡å¼µã—ãŸãŒæ”¹å–„ã¯é™å®šçš„ã€é‡è¦åº¦ã§ã¯ãƒªãƒ¼ã‚°Ã—xT crossãŒç¶­æŒã€‚                                                                                | `experiments/exp0018/logs/host_baseline_002_metrics.json`, `experiments/exp0018/training.ipynb`               |
| exp0019_weighted_sample          | exp0018_league_gate_residual     | 2025-10-03 | wRMSEé‡ã¿ã‚’LightGBMã®`sample_weight`å…¨å·¥ç¨‹ã¸çµ±ä¸€é©ç”¨ | CV mean: 0.2461 (std 0.0066) / OOF: 0.2462                                       | âœ… æ”¹å–„                                                                    | æŒ‡æ¨™é‡ã¿ã¨æœ€é©åŒ–ã‚’æƒãˆfold1ãŒ0.2347ã¾ã§ä½ä¸‹ã€‚foldé–“ã°ã‚‰ã¤ããŒç¸®ã¿ã€ãƒªãƒ¼ã‚°æ®‹å·®è£œæ­£ã¨çµ„ã¿åˆã‚ã›ãŸæ¤œè¨¼ãŒå®‰å®šã€‚                                                                                             | `experiments/exp0019/logs/host_baseline_002_metrics.json`, `experiments/exp0019/training.ipynb`               |
| exp0020_catboost_blend           | exp0019_weighted_sample          | 2025-10-03 | CatBoostè¿½åŠ  + LightGBMãƒ–ãƒ¬ãƒ³ãƒ‰æ¯”ç‡ã®ã‚°ãƒªãƒƒãƒ‰æœ€é©åŒ–      | CV mean: 0.2461 (std 0.0066) / OOF: 0.2462 / Optuna best 0.2447                  | â– å¾®å·®                                                                    | CatBoostã®Ordered TSã¨ç·©ã„å˜èª¿æ€§åˆ¶ç´„ã§ãƒ¢ãƒ‡ãƒ«å¤šæ§˜æ€§ã‚’ç¢ºä¿ã—LGBMã¨ãƒ–ãƒ¬ãƒ³ãƒ‰ã—ãŸãŒã€å¹³å‡ã‚¹ã‚³ã‚¢ã¯exp0019ã¨åŒç­‰ã€‚é‡ã¿åˆ»ã¿ã®ç´°åˆ†åŒ–ã‚„CatBoostå´ã®æœ€é©åŒ–ä½™åœ°ã‚’æ¤œè¨ã€‚                                                          | `experiments/exp0020/logs/host_baseline_002_metrics.json`, `experiments/exp0020/training_with_catboost.ipynb` |
| exp0021_soft_moe                 | exp0020_catboost_blend           | 2025-10-04 | Soft MoE (Mixture of Experts) ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£å°å…¥  | CV mean: 0.2476 (std 0.0071) / OOF: 0.2477 / Gating AUC: 0.898 / AP: 0.812       | â– å¾®æ‚ªåŒ–                                                                   | xAG threshold=0.1ã§Low/High expertã‚’åˆ†é›¢ã€‚Gatingç²¾åº¦ã¯é«˜ã„ãŒå¹³å‡ã‚¹ã‚³ã‚¢+0.0015æ‚ªåŒ–ã€‚Low expertãŒåŸºç¤ãƒ‘ã‚¿ãƒ¼ãƒ³ã®ã¿ã€High expertãŒãƒãƒ¼ãƒ Ã—æˆ¦è¡“ç‰¹å¾´ã‚’æ´»ç”¨ã™ã‚‹æ˜ç¢ºãªå½¹å‰²åˆ†æ‹…ã‚’ç¢ºèªã€‚thresholdæœ€é©åŒ–ã¨experté–“ãƒãƒ©ãƒ³ã‚¹èª¿æ•´ãŒæ¬¡ã®æ”¹å–„ç‚¹ã€‚ | `experiments/exp0021/logs/host_soft_moe_metrics.json`, `experiments/exp0021/training_with_catboost.ipynb`     |
| exp0023_soft_moe_threshold_028   | exp0021_soft_moe                 | 2025-10-04 | Soft MoE threshold 0.1â†’0.28ã¸å¤‰æ›´           | CV mean: 0.2293 (std 0.0074) / OOF: 0.2294 / Gating AUC: 0.876 / AP: 0.464       | ãƒªãƒ¼ãƒ€ãƒ¼ãƒœãƒ¼ãƒ‰ã®ä¹–é›¢ãŒå¤§ãã„ãŸã‚ã€softmoeæˆ¦ç•¥ã¯closeã¨ã™ã‚‹ã€‚exp0020ã«ç‰¹å¾´é‡è¿½åŠ ã®ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã‚’æ¬¡å›ã‹ã‚‰é–‹å§‹ã™ã‚‹ã“ã¨ã«ã™ã‚‹ã€‚ | threshold=0.28ã§Low/High expertã®åˆ†é›¢ç‚¹ã‚’èª¿æ•´ã€‚exp0021æ¯”ã§-0.0183ã®å¤§å¹…æ”¹å–„ã‚’é”æˆã—éå»æœ€è‰¯ã‚’æ›´æ–°ã€‚Gating APã¯ä½ä¸‹ã—ãŸãŒã€expertã®å°‚é–€æ€§ãŒæ˜ç¢ºåŒ–ã•ã‚Œäºˆæ¸¬ç²¾åº¦ãŒå‘ä¸Šã€‚                                           | `experiments/exp0023/logs/host_soft_moe_metrics.json`, `experiments/exp0023/training_with_soft_moe.ipynb`     |
| exp0024_data_leakage_fix         | exp0020_catboost_blend           | 2025-10-04 | ç‰¹å¾´é‡ã®è¿½åŠ                                    | CV mean: 0.2309 (std 0.0057) / OOF: 0.2310 / Optuna best: 0.2303                 | âœ… å¤§å¹…æ”¹å–„                                                                  | é‡è¦åº¦ãƒ»è©³ç´°ã¯ `experiments/exp0024/README.md` ã®è€ƒå¯Ÿã‚’å‚ç…§                                                                                                      | `experiments/exp0024/logs/host_baseline_002_metrics.json`, `experiments/exp0024/DATA_LEAKAGE_AUDIT_REPORT.md` |
| exp0025_host_baseline_002        | exp0024_data_leakage_fix         | 2025-10-04 | ç‰¹å¾´é‡ã®è¿½åŠ                                    | CV mean: 0.2307 (std 0.0058) / OOF: 0.2308 / Optuna best: 0.2297 (fold1: 0.2221) | â– å¾®å·®                                                                    | è©³ç´°ã¯ `experiments/exp0025/` ã®ãƒ¬ãƒãƒ¼ãƒˆå‚ç…§                                                                                                                        | `experiments/exp0025/logs/host_baseline_002_metrics.json`                                                     |
| exp0027_stratified_cv            | exp0025_host_baseline_002        | 2025-10-04 | StratifiedGroupKFoldå°å…¥ï¼ˆæ­£ä¾‹ç‡ã§å±¤åŒ–ï¼‰            | CV mean: 0.2315 (std 0.0052) / OOF: 0.2316 / Optuna best: 0.2309 (fold1: 0.2370) | âœ… CVå®‰å®šæ€§å‘ä¸Š                                                              | match_idå˜ä½ã§æ­£ä¾‹ç‡ï¼ˆxAGâ‰¥0.1ï¼‰ã‚’å±¤åŒ–ã—foldé–“ã®åˆ†æ•£ã‚’å‰Šæ¸›ã€‚Valæ­£ä¾‹ç‡std=0.0029ã¨å‡ä¸€åŒ–ã«æˆåŠŸã€‚CV meanå¾®å¢—ï¼ˆ+0.0008ï¼‰ã ãŒstdæ¸›å°‘ï¼ˆ-0.0006ï¼‰ã§ãƒã‚¤ãƒ‘ãƒ©æœ€é©åŒ–ã®ä¿¡é ¼æ€§å‘ä¸Šã€‚                                   | `experiments/exp0027/logs/host_baseline_002_metrics.json`, `experiments/exp0027/PHASE1_COMPLETED.md`          |
| exp0028_isotonic_calibration     | exp0027_stratified_cv            | 2025-10-04 | Isotonicæ ¡æ­£ï¼ˆæ­£é ˜åŸŸã®ã¿ï¼‰                         | CV mean: 0.2315 (std 0.0052) / OOF: 0.2316 / Optuna best: 0.2309 (fold1: 0.2380) | â– æ¨ªã°ã„                                                                   | ãƒ–ãƒ¬ãƒ³ãƒ‰å¾Œã®äºˆæ¸¬ã«å¯¾ã—ã¦yâ‰¥0.1ã®æ­£é ˜åŸŸã®ã¿Isotonic Regressionã‚’é©ç”¨ã€‚ã‚¹ã‚³ã‚¢ã¯æ¨ªã°ã„ã ãŒã€æ ¡æ­£ã«ã‚ˆã‚Šäºˆæ¸¬åˆ†å¸ƒãŒæ”¹å–„ã€‚æ¬¡ã¯NNLSã‚¹ã‚¿ãƒƒã‚­ãƒ³ã‚°ã§æ”¹å–„ã‚’å›³ã‚‹ã€‚                                                        | `experiments/exp0028/logs/host_baseline_002_metrics.json`, `experiments/exp0028/README.md`                    |
| exp0029_nnls_stacking            | exp0027_stratified_cv            | 2025-10-04 | NNLSéè² ã‚¹ã‚¿ãƒƒã‚­ãƒ³ã‚°ï¼ˆæ´¾ç”Ÿç‰¹å¾´å«ã‚€ï¼‰                   | LGBM OOF: 0.2316 / CB OOF: 0.2313 / NNLS OOF: 0.2298                             | âœ… æ”¹å–„                                                                    | 4ç‰¹å¾´é‡ï¼ˆLGBM, CB, max(LGBM-0.1,0), max(CB-0.1,0)ï¼‰ã‚’NNLSçµ±åˆã€‚ä¿‚æ•°ã¯LGBM:0.45, CB:0.59, LGBM_pos:0.004, CB_pos:0.00ã€‚ã‚°ãƒªãƒƒãƒ‰ã‚µãƒ¼ãƒæ¯”+0.0017æ”¹å–„ã€å˜ä½“æ¯”ã§æœ€å¤§-0.0018æ”¹å–„ã€‚ | `experiments/exp0029/logs/host_baseline_002_metrics.json`, `experiments/exp0029/README.md`                    |
| exp0030_tweedie_loss             | exp0027_stratified_cv            | 2025-10-04 | Tweedieæå¤±ï¼ˆã‚¼ãƒ­éå‰°ãƒ‡ãƒ¼ã‚¿å¯¾å¿œï¼‰                    | CV mean: 0.2326 (std 0.0065) / OOF: 0.2327 / variance_power: 1.19                | âŒ æ‚ªåŒ–                                                                    | LGBMã«Tweedieæå¤±ã‚’é©ç”¨ã—ã‚¼ãƒ­éå‰°ãƒ‡ãƒ¼ã‚¿ã«å¯¾å¿œã‚’è©¦ã¿ã‚‹ã‚‚ã€L2æå¤±(exp0027: 0.2316)æ¯”ã§+0.0011æ‚ªåŒ–ã€‚variance_power=1.19ãŒæœ€é©ã ã£ãŸãŒæ”¹å–„ã›ãšã€‚ã‚¼ãƒ­éå‰°å¯¾ç­–ã«ã¯åˆ¥ã‚¢ãƒ—ãƒ­ãƒ¼ãƒãŒå¿…è¦ã€‚                | `experiments/exp0030/logs/host_baseline_002_metrics.json`, `experiments/exp0030/README.md`                    |
| exp0031_moe_tree                 | exp0029_nnls_stacking            | 2025-10-05 | æœ¨ãƒ¢ãƒ‡ãƒ«ç‰ˆMoEï¼ˆLow/Highå°‚é–€å®¶ + æ¸©åº¦ã‚²ãƒ¼ãƒˆï¼‰          | LGBM OOF: 0.2316 / NNLS OOF: 0.2275 / MoE OOF: 0.2271 / Gate AUC: 0.921         | âœ… æ”¹å–„                                                                    | Low(y<0.1)ã¨High(yâ‰¥0.1)å°‚é–€å®¶ã‚’ä½œæˆã—ã€Isotonicæ ¡æ­£æ¸ˆã¿ã‚²ãƒ¼ãƒˆç¢ºç‡ã§æ¸©åº¦Ï„=0.6ã®ã‚½ãƒ•ãƒˆåˆæˆã€‚NNLSæ¯”âˆ’0.0004æ”¹å–„ã€‚ã‚²ãƒ¼ãƒˆAUC=0.921ã§åˆ†é›¢ç²¾åº¦ã¯é«˜ã„ãŒã€æ”¹å–„å¹…ã¯é™å®šçš„ã€‚            | `experiments/exp0031/logs/host_moe_tree_002_metrics.json`, `experiments/exp0031/README.md`                    |

> **How to use**
> 1. å®Ÿé¨“ã”ã¨ã«1è¡Œè¿½åŠ ã—ã€`experiments/expXXXX` ã§ã®å¤‰æ›´å†…å®¹ãƒ»ä»®èª¬ã‚’ç°¡æ½”ã«ã¾ã¨ã‚ã‚‹ã€‚
> 2. ç²¾åº¦æŒ‡æ¨™ã¯ CV/OOF/LB ãªã©æ¯”è¼ƒã§ãã‚‹æ•°å€¤ã‚’å‰å¾Œã§è¨˜éŒ²ã™ã‚‹ã€‚
> 3. å†ç¾æ€§ã‚’é«˜ã‚ã‚‹ãŸã‚ã€é–¢é€£ãƒãƒ¼ãƒˆãƒ–ãƒƒã‚¯ãƒ»PRãƒ»ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆãªã©ã®ãƒ‘ã‚¹ã‚’è¨˜è¼‰ã™ã‚‹ï¼ˆä¸Šè¨˜ã¯è¨˜å…¥ä¾‹ï¼‰ã€‚
> 4. è¿½åŠ æƒ…å ±ãŒå¤šã„å ´åˆã¯ `experiments/expXXXX/notes.md` ã«è©³ç´°ã‚’æ›¸ãã€æœ¬è¡¨ã‹ã‚‰ãƒªãƒ³ã‚¯ã™ã‚‹ã€‚

### exp0002_host_baseline_002 è¿½åŠ è¦ç´ 

- é¸æ‰‹ã®å¹´é½¢ã‚’`Date`ã¨`birth_date`ã‹ã‚‰ç®—å‡ºã—ã€åŸºæœ¬ç‰¹å¾´é‡ã«è¿½åŠ ã€‚
- ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãƒ‡ãƒ¼ã‚¿ã‚’è©¦åˆÃ—é¸æ‰‹ã«é›†ç´„ã—ã€ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ç·æ•°ãƒ»å¹³å‡åº§æ¨™ãƒ»ã‚´ãƒ¼ãƒ«æ•°ãƒ»ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚¿ã‚¤ãƒ—åˆ¥ã‚«ã‚¦ãƒ³ãƒˆã‚’çµåˆã€‚
- ãƒ‘ã‚¹ã‚„ã‚·ãƒ¥ãƒ¼ãƒˆãªã©ä¸»è¦ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã®æˆåŠŸç‡ã€ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚¾ãƒ¼ãƒ³åˆ¥ã‚¢ã‚¯ã‚·ãƒ§ãƒ³æ¯”ç‡ã€å‡ºå ´æ™‚é–“ã‚ãŸã‚Šã®æŒ‡æ¨™ã‚’ä½œæˆã€‚
- æ”»å®ˆã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã®æ¯”ç‡ã‚„`pass â†’ shot`ã®é€£ç¶šç™ºç”Ÿå›æ•°ã‚’ç‰¹å¾´é‡åŒ–ã—ã¦æ”»æ’ƒå¯„ã‚Šã®æŒ¯ã‚‹èˆã„ã‚’æ‰ãˆã‚‹ã€‚
- `player_id` / `Squad` / `Opponent`ã«å¯¾ã—ã¦ã‚¿ãƒ¼ã‚²ãƒƒãƒˆã‚¨ãƒ³ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã‚’å®Ÿæ–½ã—ã€CVãƒªãƒ¼ã‚¯ã‚’é¿ã‘ã‚‹ãŸã‚foldå˜ä½ã®å¹³å‡ã§å¹³æ»‘åŒ–ã€‚

### exp0004_two_stage_hurdle æ‰€æ„Ÿ

- xAG>0ã®ç™ºç”Ÿç‡ã¯ç´„31%ã§ã€åˆ†é¡ã‚¹ãƒ†ãƒ¼ã‚¸ã®ç¢ºç‡ãŒ0.2ã€œ0.3ç¨‹åº¦ã«åæŸã™ã‚‹ã‚±ãƒ¼ã‚¹ãŒå¤šãã€å›å¸°å‡ºåŠ›ã¨ã®ç©ã«ã‚ˆã£ã¦é«˜xAGè©¦åˆã‚’éåº¦ã«ç¸®å°ã™ã‚‹æŒ™å‹•ãŒç™ºç”Ÿã—ãŸã€‚
- 2æ®µéšåŒ–ã«ã‚ˆã‚Šè»½å¾®ãªå¤–ã‚Œå€¤ã¯æŠ‘åˆ¶ã§ããŸä¸€æ–¹ã€å˜æ®µLightGBMï¼ˆexp0003ï¼‰ã¨æ¯”è¼ƒã—ã¦CV meanãŒç´„+0.023æ‚ªåŒ–ã—ã€ã‚¼ãƒ­ã‚¤ãƒ³ãƒ•ãƒ¬å¯¾ç­–ã¨ã—ã¦ã¯ç¾çŠ¶ã®ã¾ã¾ã§ã¯æœ‰åŠ¹æ€§ãŒç¢ºèªã§ããªã‹ã£ãŸã€‚
- æ”¹å–„ä½™åœ°ã¨ã—ã¦ã¯ã€åˆ†é¡ç¢ºç‡ã®ã‚­ãƒ£ãƒªãƒ–ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆPlatt/Isotonicï¼‰ã‚„ã‚¼ãƒ­é™¤å¤–æ™‚ã®ãƒªã‚µãƒ³ãƒ—ãƒ«ã€å›å¸°ã‚¹ãƒ†ãƒ¼ã‚¸ã§ã®ãƒ¡ãƒˆãƒªã‚¯ã‚¹æœ€é©åŒ–ï¼ˆQuantileç›®æ¨™ã‚„ã‚¿ã‚¹ã‚¯å°‚ç”¨ãƒ¡ãƒˆãƒªãƒƒã‚¯ï¼‰ã‚’ä½µç”¨ã™ã‚‹ã‚¢ãƒ–ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãŒå¿…è¦ã€‚

### exp0005_squad_opponent_te è¿½åŠ è¦ç´ 

- **SquadÃ—Opponentäº¤äº’ä½œç”¨ç‰¹å¾´**ï¼š`Squad_x_Opponent = Squad + "_vs_" + Opponent` ã®å½¢å¼ã§å¯¾æˆ¦ã‚«ãƒ¼ãƒ‰æƒ…å ±ã‚’ä½œæˆ
- **OOFã‚¿ãƒ¼ã‚²ãƒƒãƒˆã‚¨ãƒ³ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°**ï¼šæ—¢å­˜ã®player_id/Squad/Opponentã«åŠ ãˆã€Squad_x_Opponentã‚‚è¿½åŠ ï¼ˆè¨ˆ4ç¨®é¡ï¼‰
- **ã‚¹ãƒ ãƒ¼ã‚¸ãƒ³ã‚°**ï¼šÎ±=10.0ã§ãƒ™ã‚¤ã‚ºçš„å¹³æ»‘åŒ–ã‚’å®Ÿæ–½ã—ã€å°‘æ•°ã‚µãƒ³ãƒ—ãƒ«ã®éå­¦ç¿’ã‚’æŠ‘åˆ¶
- **æ¼æ´©é˜²æ­¢**ï¼šGroupKFold(match_id)ã§åˆ†å‰²ã—ãŸfoldå¤–ãƒ‡ãƒ¼ã‚¿ã§TEã‚’ç®—å‡ºã—ã€foldå†…ã«é©ç”¨
- exp0003ï¼ˆCV: 0.2662ï¼‰ã‹ã‚‰**âˆ’0.0003æ”¹å–„**ã§ãƒ™ã‚¹ãƒˆã‚¹ã‚³ã‚¢ã‚’æ›´æ–°ã€‚å¯¾æˆ¦ã‚«ãƒ¼ãƒ‰ç‰¹æœ‰ã®xAGå‚¾å‘ï¼ˆæ”»æ’ƒçš„vså®ˆå‚™çš„ã€å¼·è±ªvsä¸‹ä½ãªã©ï¼‰ã‚’åŠ¹æœçš„ã«æ•æ‰ã—ãŸã€‚

### exp0006_monotone_constraints è¿½åŠ è¦ç´ 

- **LightGBMå˜èª¿æ€§åˆ¶ç´„ã®å°å…¥**ï¼š`monotone_constraints`ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã§ç‰¹å¾´é‡ã¨ã‚¿ãƒ¼ã‚²ãƒƒãƒˆã®é–¢ä¿‚æ€§ã‚’æ˜ç¤ºçš„ã«åˆ¶ç´„
- **å¯¾è±¡ç‰¹å¾´é‡ï¼ˆ14å€‹ï¼‰**ï¼š
  - ãƒ—ãƒ­ã‚°ãƒ¬ãƒƒã‚·ãƒ–ç³»ï¼š`progressive_attempt_count`, `progressive_success_count`, `progressive_distance_total/mean`
  - ãƒ‡ã‚£ãƒ¼ãƒ—ç³»ï¼š`deep_completion_count`, `final_third_entry_count`, `penalty_area_entry_count`
  - ã‚´ãƒ¼ãƒ«ç³»ï¼š`goal_count`, `pass_to_shot_count`
  - æ”»æ’ƒã‚¾ãƒ¼ãƒ³ç³»ï¼š`zone_attacking_count`, `zone_attacking_ratio`, `attacking_ratio`
- **åˆ¶ç´„æ–¹æ³•**ï¼š`monotone_constraints_method = "advanced"` ã§é«˜ç²¾åº¦ãªåˆ¶ç´„é©ç”¨
- **æœŸå¾…åŠ¹æœ**ï¼š
  - ãƒ‰ãƒ¡ã‚¤ãƒ³çŸ¥è­˜ï¼ˆæ”»æ’ƒçš„ãƒ—ãƒ¬ãƒ¼â†‘ â†’ xAGâ†‘ï¼‰ã‚’ç›´æ¥ãƒ¢ãƒ‡ãƒ«ã«çµ„ã¿è¾¼ã¿
  - éå­¦ç¿’ã‚’æŠ‘åˆ¶ã—æ±åŒ–æ€§èƒ½ã‚’å‘ä¸Š
  - CVã¨LBã®ä¹–é›¢ã‚’ä½æ¸›

### exp0007_xt_features è¿½åŠ è¦ç´ 

- **çµæœã‚µãƒãƒªãƒ¼**ï¼šCV mean 0.2653 (std 0.0063) / OOF 0.2654ã€‚exp0006_monotone_constraintsæ¯”ã§âˆ’0.0004æ”¹å–„ã—ã€æ–°ãƒ™ã‚¹ãƒˆã€‚fold2 (0.2764) ãŒçªå‡ºã™ã‚‹ä¸€æ–¹ã§ä»–foldã¯0.264å‰å¾Œã«åæŸã—å®‰å®šã€‚
- **xT (Expected Threat) ç‰¹å¾´é‡ã®å°å…¥**ï¼šã‚µãƒƒã‚«ãƒ¼åˆ†æã®æ¨™æº–æŒ‡æ¨™ã‚’xAGäºˆæ¸¬ã«æ´»ç”¨ã€‚
- **xTã‚°ãƒªãƒƒãƒ‰**ï¼šãƒ”ãƒƒãƒã‚’16Ã—12ã‚°ãƒªãƒƒãƒ‰ã«åˆ†å‰²ã—ã€å„ä½ç½®ã®å¾—ç‚¹è„…å¨åº¦ã‚’å®šç¾©ã€‚
  - ã‚´ãƒ¼ãƒ«ã«è¿‘ã„ã»ã©ã€ä¸­å¤®ã«è¿‘ã„ã»ã©é«˜ã„è„…å¨å€¤ã€‚
  - Karun Singh ã®æ‰‹æ³•ãƒ™ãƒ¼ã‚¹ã®ç°¡æ˜“å®Ÿè£…ï¼ˆçµŒé¨“å‰‡ï¼‰ã€‚
- **Î”xTè¨ˆç®—**ï¼šã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã®é–‹å§‹ä½ç½®ã¨çµ‚äº†ä½ç½®ã®è„…å¨å·®åˆ†ã‚’ç®—å‡ºã€‚
  - æˆåŠŸã‚¢ã‚¯ã‚·ãƒ§ãƒ³ï¼šå®Ÿéš›ã®xTå¢—åˆ†ã€‚
  - å¤±æ•—ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ï¼šé–‹å§‹åœ°ç‚¹ã®ä¾¡å€¤ã‚’30%å¤±ã†ï¼ˆãƒšãƒŠãƒ«ãƒ†ã‚£ï¼‰ã€‚
- **Optunaæœ€é©åŒ–çµæœ**ï¼štrial 29ãŒæœ€è‰¯ã€‚`num_leaves=27`, `learning_rateâ‰ˆ0.0148`, `min_child_samples=39`ã§Î”xTã¨ã®ç›¸æ€§ãŒè‰¯å¥½ã€‚
- **å¯¾è±¡ã‚¢ã‚¯ã‚·ãƒ§ãƒ³**ï¼špass, cross, carry, dribble, free_kick, corner
- **ç”Ÿæˆç‰¹å¾´é‡ï¼ˆ10å€‹ï¼‰**ï¼š
  - ç·å¢—åˆ†ï¼š`xt_delta_sum`, å¹³å‡å¢—åˆ†ï¼š`xt_delta_mean`, æœ€å¤§å¢—åˆ†ï¼š`xt_delta_max`
  - æ­£ã®å¢—åˆ†ã®ã¿ï¼š`xt_positive_sum`, `xt_positive_mean`
  - æˆåŠŸ/å¤±æ•—è€ƒæ…®ï¼š`xt_value_sum`, `xt_value_mean`
  - é–‹å§‹ä½ç½®ï¼š`xt_start_mean`, `xt_start_max`
- **æœŸå¾…åŠ¹æœ**ï¼š
  - çµæœï¼ˆæˆåŠŸ/å¤±æ•—ï¼‰ã«ä¾å­˜ã—ãªã„ã€Œè„…å¨å‰µå‡ºé‡ã€ã‚’æ•æ‰
  - ä½ç½®æƒ…å ±ã®é«˜åº¦æ´»ç”¨ï¼ˆåº§æ¨™ â†’ è„…å¨å€¤ã¸ã®å¤‰æ›ï¼‰
  - ãƒ—ãƒ­ã‚°ãƒ¬ãƒƒã‚·ãƒ–ç‰¹å¾´ã¨ã®ç›¸ä¹—åŠ¹æœï¼ˆå‰é€²ãƒ—ãƒ¬ãƒ¼ Ã— è„…å¨å¢—åŠ ï¼‰

## ğŸ³ Docker ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆï¼ˆæ¨å¥¨ï¼‰

### 1. Dockerç’°å¢ƒã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

```bash
# ãƒªãƒã‚¸ãƒˆãƒªã‚¯ãƒ­ãƒ¼ãƒ³
git clone https://github.com/YOUR_USERNAME/DSDOJO-3.git
cd DSDOJO-3

# Dockerã‚¤ãƒ¡ãƒ¼ã‚¸ã®ãƒ“ãƒ«ãƒ‰ã¨èµ·å‹•
docker-compose up -d

# Jupyter Labã¸ã‚¢ã‚¯ã‚»ã‚¹
# ãƒ–ãƒ©ã‚¦ã‚¶ã§ http://localhost:8888 ã‚’é–‹ã
```

### 2. ãƒãƒ¼ãƒˆãƒ–ãƒƒã‚¯å®Ÿè¡Œ

```
# Jupyter Labã§ experiments/exp0001/training.ipynb ã‚’é–‹ã„ã¦å®Ÿè¡Œ
# å…¨ã‚»ãƒ«ã‚’é †ç•ªã«å®Ÿè¡Œ: Cell â†’ Run All Cells
```

### 3. Dockerç’°å¢ƒã®ç®¡ç†

```bash
# ã‚³ãƒ³ãƒ†ãƒŠåœæ­¢
docker-compose down

# ã‚³ãƒ³ãƒ†ãƒŠå†èµ·å‹•
docker-compose restart

# ãƒ­ã‚°ç¢ºèª
docker-compose logs -f
```

## ğŸ’» ãƒ­ãƒ¼ã‚«ãƒ«ç’°å¢ƒã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ï¼ˆDockeræœªä½¿ç”¨ã®å ´åˆï¼‰

### 1. Pythonç’°å¢ƒæº–å‚™

```bash
# Python 3.11æ¨å¥¨
python3 -m venv venv
source venv/bin/activate  # Windows: venv\Scripts\activate

# ä¾å­˜é–¢ä¿‚ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
pip install -r requirements.txt
```

### 2. Jupyter Labèµ·å‹•

```bash
jupyter lab

# ãƒ–ãƒ©ã‚¦ã‚¶ã§ experiments/exp0001/training.ipynb ã‚’é–‹ã„ã¦å®Ÿè¡Œ
```

### 3. ãƒ¯ãƒ³ã‚³ãƒãƒ³ãƒ‰å®Ÿé¨“å®Ÿè¡Œï¼ˆJupyterä¸è¦ï¼‰

```bash
# config.yaml ã¨ç”Ÿãƒ‡ãƒ¼ã‚¿ (match_train/test, action_data ãªã©) ãŒ paths.data_dir ã«æƒã£ã¦ã„ã‚‹å‰æ
python -m scripts.run_local_experiment \
  --config experiments/exp0001/config.yaml \
  --output-dir experiments/exp0001/artifacts

# å®Ÿè¡Œå¾Œ: artifacts/ å†…ã« metrics.json, oof_predictions.csv, feature_importance.csv, submission_exp0001.csv ãŒç”Ÿæˆã•ã‚Œã¾ã™
# ã¾ãŸ `experiments/exp0001/logs/` ã«ã‚‚æœ€æ–°ã®CVçµæœ (`*_metrics.json`, `*_training.log`) ãŒè¨˜éŒ²ã•ã‚Œã¾ã™
```

## ğŸ“Š ã‚³ãƒ³ãƒšãƒ†ã‚£ã‚·ãƒ§ãƒ³å›ºæœ‰ã®ç‰¹å¾´

### ãƒ‡ãƒ¼ã‚¿ã®æ™‚é–“åˆ†è§£èƒ½ã‚®ãƒ£ãƒƒãƒ—

ã“ã®ã‚³ãƒ³ãƒšãƒ†ã‚£ã‚·ãƒ§ãƒ³ã®æœ€å¤§ã®ç‰¹å¾´ã¯ã€**å…¥åŠ›ã¨å‡ºåŠ›ã®æ™‚é–“åˆ†è§£èƒ½ãŒç•°ãªã‚‹**ç‚¹ã§ã™ï¼š

- **å…¥åŠ›ãƒ‡ãƒ¼ã‚¿**: ãƒ—ãƒ¬ãƒ¼å˜ä½ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãƒ‡ãƒ¼ã‚¿ (`action_data.csv`)
- **å‡ºåŠ›ãƒ‡ãƒ¼ã‚¿**: è©¦åˆå˜ä½ã®xAG (`match_train_data.csv`, `match_test_data.csv`)

ãƒ—ãƒ¬ãƒ¼ãƒ¬ãƒ™ãƒ«ã®æƒ…å ±ã‚’ã©ã®ã‚ˆã†ã«é›†ç´„ã—ã¦è©¦åˆãƒ¬ãƒ™ãƒ«ã®äºˆæ¸¬ã«ç¹‹ã’ã‚‹ã‹ãŒéµã¨ãªã‚Šã¾ã™ã€‚

### è©•ä¾¡æŒ‡æ¨™: é‡ã¿ä»˜ãRMSE

```python
def calculate_pw_rmse(labels, preds, w_pos=5.0, thresh=0.1):
    """Position-Weighted RMSE

    xAG >= 0.1 ã®å ´åˆã«èª¤å·®ã‚’5å€ã«é‡ã¿ä»˜ã‘
    ãƒãƒ£ãƒ³ã‚¹å‰µå‡ºãŒã‚ã£ãŸè©¦åˆã®äºˆæ¸¬ç²¾åº¦ã‚’é‡è¦–
    """
    weights = np.where(labels >= thresh, w_pos, 1.0)
    squared_errors = (labels - preds) ** 2
    weighted_squared_errors = weights * squared_errors
    pw_rmse = np.sqrt(np.mean(weighted_squared_errors) + 1e-9)
    return float(pw_rmse)
```

### xAG (Expected Assists) ã¨ã¯

- ã‚·ãƒ¥ãƒ¼ãƒˆã«ã¤ãªãŒã£ãŸãƒ‘ã‚¹ã«ã¤ã„ã¦ç®—å‡ºã•ã‚Œã‚‹ã‚¢ã‚·ã‚¹ãƒˆæœŸå¾…å€¤
- ã‚·ãƒ¥ãƒ¼ãƒˆã®æˆå¦ã«ã‚ˆã‚‰ãšã€ãƒ‘ã‚¹ã®å‡ºã—æ‰‹ã®ãƒãƒ£ãƒ³ã‚¹æ¼”å‡ºåŠ›ã‚’æ¸¬ã‚‹æŒ‡æ¨™
- å®Ÿéš›ã®ã‚¢ã‚·ã‚¹ãƒˆæ•°ã§ã¯è¦‹ãˆãªã„ã€é¸æ‰‹ã®çœŸã®ãƒ—ãƒ¬ãƒ¼ãƒ¡ãƒ¼ã‚­ãƒ³ã‚°èƒ½åŠ›ã‚’å®šé‡åŒ–

## ğŸ“Š å®Ÿé¨“ç®¡ç†ã®ä»•çµ„ã¿

### è¨­å®šã®éšå±¤

1. **åŸºåº•è¨­å®š** (`configs/`): ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå…±é€šã®è¨­å®š
2. **å®Ÿé¨“ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆ** (`experiments/exp0001/config.yaml`): å®Ÿè¡Œæ™‚ã®å›ºå®šè¨­å®š

### CVåˆ†å‰²ã®å›ºå®š

```python
# cv_folds.parquet ã§CVåˆ†å‰²ã‚’å®Œå…¨å›ºå®š
# split_id ã§CVæ‰‹æ³•ã‚’è­˜åˆ¥
# åŒä¸€åˆ†å‰²ã§ã®æ¨ªæ¯”è¼ƒã‚’ä¿è¨¼
# æ³¨æ„: è©¦åˆå˜ä½ã§ã®åˆ†å‰²ã‚’æ¨å¥¨ï¼ˆé¸æ‰‹IDã§ã®ãƒªãƒ¼ã‚¯ã‚’é˜²ãï¼‰
```

### æˆæœç‰©ã®è¿½è·¡

- **OOF**: `oof.parquet` (index, fold, y_true, y_pred)  
- **ãƒ¡ãƒˆãƒªã‚¯ã‚¹**: `metrics.json` (CV meanÂ±std, per-fold)
- **ãƒ¢ãƒ‡ãƒ«**: `model/fold*.lgb` (LightGBM binary)
- **æå‡º**: `submissions/submission.csv` + manifest.json

### å®Ÿé¨“å°å¸³

`experiments.csv` ã«å…¨å®Ÿé¨“ã®è¨˜éŒ²ã‚’è‡ªå‹•è¿½è¨˜ï¼š

| exp_id | cv_mean | cv_std | lb_public | git_sha | wandb_url | notes |
|--------|---------|--------|-----------|---------|-----------|-------|
| exp0001 | 0.8732 | 0.0061 | TBD | abcd1234 | wandb.ai/... | baseline |

## ğŸ”§ ä¸»è¦ã‚³ãƒãƒ³ãƒ‰

### ãƒ‡ãƒ¼ã‚¿ç®¡ç†ï¼ˆDVCï¼‰

```bash
# ãƒ‡ãƒ¼ã‚¿ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³å®Ÿè¡Œ
dvc repro

# ãƒ‡ãƒ¼ã‚¿å¾©å…ƒ
dvc pull

# æ–°ãƒ‡ãƒ¼ã‚¿è¿½åŠ 
dvc add data/external/new_data.csv
dvc push
```

### å®Ÿé¨“å®Ÿè¡Œï¼ˆCLIç‰ˆï¼‰

```bash
# ãƒ‡ãƒ¼ã‚¿ç¢ºèª
ls -lh data/*.csv

# å‰å‡¦ç†ï¼ˆå¿…è¦ã«å¿œã˜ã¦ï¼‰
python -m scripts.preprocess --config configs/data.yaml --input data --output data

# CVåˆ†å‰²ä½œæˆï¼ˆè©¦åˆå˜ä½ã§ã®åˆ†å‰²ã‚’æ¨å¥¨ï¼‰
python -m scripts.make_folds --config configs/cv.yaml --data data/match_train_data.csv --output cv_folds.parquet
```

### ã‚³ãƒ¼ãƒ‰å“è³ª

```bash
# ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆãƒ»ãƒªãƒ³ãƒˆ
black .
ruff . --fix

# pre-commit ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
pre-commit install

# ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
pytest tests/
```

## ğŸ“ˆ ç‰¹å¾´é‡ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãƒªãƒ³ã‚°ã®ã‚¢ã‚¤ãƒ‡ã‚¢

### ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãƒ‡ãƒ¼ã‚¿ã®é›†ç´„

ãƒ—ãƒ¬ãƒ¼å˜ä½ã®ãƒ‡ãƒ¼ã‚¿ã‚’è©¦åˆå˜ä½ã«é›†ç´„ã™ã‚‹éš›ã®ç‰¹å¾´é‡ä¾‹ï¼š

- **åŸºæœ¬çµ±è¨ˆé‡**: ãƒ—ãƒ¬ãƒ¼å›æ•°ã€ãƒ‘ã‚¹æˆåŠŸç‡ã€ã‚·ãƒ¥ãƒ¼ãƒˆæ•°ã€ã‚¢ã‚·ã‚¹ãƒˆæ•°
- **ä½ç½®æƒ…å ±**: ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ä½ç½®ã®åˆ†å¸ƒï¼ˆæœ€çµ‚ã‚µãƒ¼ãƒ‰ã€ãƒšãƒŠãƒ«ãƒ†ã‚£ã‚¨ãƒªã‚¢å†…ãªã©ï¼‰
- **æ™‚é–“æƒ…å ±**: è©¦åˆåºç›¤/ä¸­ç›¤/çµ‚ç›¤ã®ãƒ—ãƒ¬ãƒ¼é »åº¦
- **ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚¿ã‚¤ãƒ—**: type_name, result_name, bodypart_nameã®åˆ†å¸ƒ
- **ãƒãƒ¼ãƒ æƒ…å ±**: ãƒ›ãƒ¼ãƒ /ã‚¢ã‚¦ã‚§ã‚¤ã€å¯¾æˆ¦ç›¸æ‰‹ã€ãƒªãƒ¼ã‚°

### é¸æ‰‹æƒ…å ±ã®æ´»ç”¨

- **å¹´é½¢**: ç”Ÿå¹´æœˆæ—¥ã‹ã‚‰ç®—å‡ºã—ãŸå¹´é½¢ãƒ»å¹´é½¢åŒºåˆ†
- **çµŒé¨“**: ãƒ—ãƒ¬ã‚¤åˆ†æ•°ã€å…ˆç™º/é€”ä¸­å‡ºå ´
- **ãƒã‚¸ã‚·ãƒ§ãƒ³**: èƒŒç•ªå·ãƒ»ãƒ—ãƒ¬ãƒ¼ä½ç½®ã‹ã‚‰ã®æ¨å®š

### ã‚«ãƒ†ã‚´ãƒªç‰¹å¾´é‡

LightGBMã®ãƒã‚¤ãƒ†ã‚£ãƒ–categoricalæ©Ÿèƒ½ã‚’æ´»ç”¨ï¼š

```python
categorical_feature = [
    'competition', 'team_name_short', 'Venue',
    'type_name', 'result_name', 'bodypart_name'
]
```

## âš™ï¸ LightGBMè¨­å®š

### æ±ºå®šæ€§ã®ç¢ºä¿

```yaml
params:
  deterministic: true
  force_row_wise: true  # æ•°å€¤å®‰å®šæ€§
  seed: 42
```

### é‡ã¿ä»˜ãL2æœ€å°åŒ–

- è©•ä¾¡æŒ‡æ¨™ã®wRMSEã¨æ•´åˆã•ã›ã‚‹ãŸã‚ã€xAGãŒ0.1ä»¥ä¸Šã®è©¦åˆã«ã¯é‡ã¿5.0ã€ãã‚Œæœªæº€ã«ã¯1.0ã‚’å‰²ã‚Šå½“ã¦ã¦`sample_weight`ã«æ¸¡ã™
- Optunaæ¢ç´¢ãƒ»æœ¬å­¦ç¿’ãƒ»OOFè©•ä¾¡ã®ã™ã¹ã¦ã§åŒã˜é‡ã¿ã‚’é©ç”¨ã—ã€æ—©æœŸçµ‚äº†æ¡ä»¶ã‚„ãƒ¢ãƒ‡ãƒ«æ¯”è¼ƒãŒæŒ‡æ¨™ã¨ä¸€è‡´ã™ã‚‹ã‚ˆã†ã«ã™ã‚‹

### GPUå¯¾å¿œ

```yaml
# Linux + NVIDIA GPU
device_type: cuda

# OpenCLï¼ˆäº’æ›æ€§é‡è¦–ï¼‰
device_type: gpu  

# CPUï¼ˆColab GPUãªã—æ™‚ï¼‰
device_type: cpu
```

## ğŸ“‹ å®Ÿé¨“ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

### å­¦ç¿’å‰

- [ ] config.yamlã§è¨­å®šå›ºå®š
- [ ] cv_folds.parquetã§CVåˆ†å‰²å›ºå®š
- [ ] W&BåˆæœŸåŒ–
- [ ] Git SHAè¨˜éŒ²

### å­¦ç¿’ä¸­

- [ ] foldã”ã¨ã®ã‚¹ã‚³ã‚¢ç›£è¦–
- [ ] early_stoppingæ´»ç”¨
- [ ] feature_importanceè¨˜éŒ²

### å­¦ç¿’å¾Œ

- [ ] OOFåˆ†æï¼ˆevaluation.ipynbï¼‰
- [ ] CVå“è³ªãƒã‚§ãƒƒã‚¯ï¼ˆãƒªãƒ¼ã‚¯ç›£æŸ»ï¼‰
- [ ] æ¨è«–ãƒ»æå‡ºï¼ˆinference.ipynbï¼‰
- [ ] å®Ÿé¨“å°å¸³æ›´æ–°
- [ ] notes.mdæ›´æ–°

## âš ï¸ ãƒ‡ãƒ¼ã‚¿ãƒªãƒ¼ã‚¯ã¸ã®æ³¨æ„

### é¸æ‰‹IDã«ã‚ˆã‚‹ãƒªãƒ¼ã‚¯

åŒã˜é¸æ‰‹ãŒè¨“ç·´ãƒ‡ãƒ¼ã‚¿ã¨ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ã®ä¸¡æ–¹ã«ç™»å ´ã—ã¾ã™ã€‚è©¦åˆå˜ä½ã§CVåˆ†å‰²ã‚’è¡Œã„ã€é¸æ‰‹IDã«ã‚ˆã‚‹æƒ…å ±ãƒªãƒ¼ã‚¯ã‚’é˜²ãã“ã¨ãŒé‡è¦ã§ã™ã€‚

### æ™‚é–“ã«ã‚ˆã‚‹ãƒªãƒ¼ã‚¯

2017-18ã‚·ãƒ¼ã‚ºãƒ³ã®ãƒ‡ãƒ¼ã‚¿ãªã®ã§ã€æ™‚ç³»åˆ—ã‚’è€ƒæ…®ã—ãŸCVåˆ†å‰²ï¼ˆä¾‹ï¼šã‚·ãƒ¼ã‚ºãƒ³å‰åŠã§è¨“ç·´ã€å¾ŒåŠã§ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ï¼‰ã‚‚æ¤œè¨ã—ã¦ãã ã•ã„ã€‚

## âš ï¸ é–‹ç™ºæ™‚ã®æ³¨æ„äº‹é …

### .ipynb ã¨ .py ã®åŒæœŸ

**é‡è¦**: ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã¯ `.ipynb` ãƒãƒ¼ãƒˆãƒ–ãƒƒã‚¯ã¨ `.py` ã‚¹ã‚¯ãƒªãƒ—ãƒˆã®åŒæœŸã«ç´°å¿ƒã®æ³¨æ„ãŒå¿…è¦ã§ã™ã€‚

- ãƒãƒ¼ãƒˆãƒ–ãƒƒã‚¯ã§å®Ÿé¨“ã‚’è¡Œã†éš›ã¯ã€å†ç¾æ€§ã®ãŸã‚å¿…ãšå¯¾å¿œã™ã‚‹ `.py` ãƒ•ã‚¡ã‚¤ãƒ«ã‚‚æ›´æ–°ã—ã¦ãã ã•ã„
- `jupytext` ã«ã‚ˆã‚‹è‡ªå‹•åŒæœŸã‚’æ¨å¥¨ï¼ˆ`jupytext --sync`ï¼‰
- åŒæœŸå¿˜ã‚Œã¯å®Ÿé¨“ã®å†ç¾æ€§ã‚’æãªã†åŸå› ã¨ãªã‚Šã¾ã™

### Stringå‹ã‚¨ãƒ©ãƒ¼ã®æ³¨æ„

**ã‚«ãƒ†ã‚´ãƒªã‚«ãƒ«ç‰¹å¾´é‡ã®å‡¦ç†ã«æ³¨æ„**:

```python
# âŒ æ‚ªã„ä¾‹ï¼šStringå‹ã®ã¾ã¾LightGBMã«æ¸¡ã™ã¨ã‚¨ãƒ©ãƒ¼
categorical_features = ['competition', 'Squad', 'Opponent']

# âœ… è‰¯ã„ä¾‹ï¼šæ˜ç¤ºçš„ã«categoryå‹ã¸å¤‰æ›
for col in categorical_features:
    df[col] = df[col].astype('category')
```

**ã‚ˆãã‚ã‚‹ã‚¨ãƒ©ãƒ¼**:
- `ValueError: Cannot use string features with LightGBM`
- è§£æ±ºç­–ï¼š`categorical_feature`ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã«åˆ—åã‚’æ¸¡ã™ **ã¾ãŸã¯** äº‹å‰ã«`category`å‹ã¸å¤‰æ›

## ğŸ” ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### ã‚ˆãã‚ã‚‹å•é¡Œ

1. **GPUæœªå¯¾å¿œã‚¨ãƒ©ãƒ¼**
   ```yaml
   # config.yaml ã§åˆ‡ã‚Šæ›¿ãˆ
   device_type: cpu
   ```

2. **Kaggle APIèªè¨¼ã‚¨ãƒ©ãƒ¼**
   ```bash
   # ~/.kaggle/kaggle.json ç¢ºèª
   # ã¾ãŸã¯ç’°å¢ƒå¤‰æ•°è¨­å®š
   export KAGGLE_USERNAME=your_username
   export KAGGLE_KEY=your_key
   ```

3. **DVC ãƒªãƒ¢ãƒ¼ãƒˆã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸**
   ```bash
   dvc remote add -d storage s3://your-bucket/xag-prediction
   dvc remote modify storage access_key_id YOUR_ACCESS_KEY
   dvc remote modify storage secret_access_key YOUR_SECRET_KEY
   ```

## ğŸ“š å‚è€ƒè³‡æ–™

- [LightGBM Documentation](https://lightgbm.readthedocs.io/)
- [DVC User Guide](https://dvc.org/doc/user-guide)
- [Weights & Biases Guides](https://docs.wandb.ai/)
- [Kaggle API](https://github.com/Kaggle/kaggle-api)
- [xG/xAG Explained - FBref](https://fbref.com/en/expected-goals-model-explained/)

## ğŸ¯ æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—

1. **æ™‚é–“åˆ†è§£èƒ½ã‚®ãƒ£ãƒƒãƒ—ã®è§£æ±º**: ãƒ—ãƒ¬ãƒ¼ãƒ¬ãƒ™ãƒ«â†’è©¦åˆãƒ¬ãƒ™ãƒ«ã¸ã®åŠ¹æœçš„ãªé›†ç´„æ–¹æ³•
2. **ãƒã‚¤ãƒ‘ãƒ¼ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿æœ€é©åŒ–**: Optunaçµ±åˆï¼ˆé‡ã¿ä»˜ãRMSEã‚’ç›®çš„é–¢æ•°ã«ï¼‰
3. **ã‚¢ãƒ³ã‚µãƒ³ãƒ–ãƒ«**: è¤‡æ•°ãƒ¢ãƒ‡ãƒ«ãƒ»CVæ‰‹æ³•ã®çµ„ã¿åˆã‚ã›
4. **ç‰¹å¾´é‡è¿½åŠ **: ã‚·ãƒ¥ãƒ¼ãƒˆä½ç½®ãƒ»ãƒ‘ã‚¹ä½ç½®ã®ç©ºé–“ç‰¹å¾´ã€é¸æ‰‹ã®éå»xAGçµ±è¨ˆ
5. **CVæˆ¦ç•¥**: è©¦åˆå˜ä½ãƒ»æ™‚ç³»åˆ—è€ƒæ…®ã®åˆ†å‰²ã§ãƒªãƒ¼ã‚¯é˜²æ­¢

---

**\"Trust Your CV\"** - é‡ã¿ä»˜ãRMSEã§CVã‚’ä¿¡é ¼ã—ã€LBã¨ã®ä¹–é›¢ã‚’ç›£è¦–ã—ãªãŒã‚‰æ”¹å–„ã‚’é‡ã­ã¾ã—ã‚‡ã†âš½ğŸš€
